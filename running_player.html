
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Running Players &#8212; Pelita 2.0 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Development" href="development.html" />
    <link rel="prev" title="Writing a Player" href="writing_player.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="running-players">
<h1>Running Players<a class="headerlink" href="#running-players" title="Permalink to this headline">¶</a></h1>
<p>To run a game using your player, you should use the command-line interface:
<code class="docutils literal notranslate"><span class="pre">pelita</span></code>. Run it with the <code class="docutils literal notranslate"><span class="pre">--help</span></code> option to get a detailed usage
description.</p>
<div class="section" id="where-to-place-your-files">
<h2>Where to Place Your Files<a class="headerlink" href="#where-to-place-your-files" title="Permalink to this headline">¶</a></h2>
<p>To begin using your own player you need to put its definition in a place
where <code class="docutils literal notranslate"><span class="pre">pelita</span></code> can find it.</p>
<p>Put the definition of your player in a file outside the Pelita source
code directory, for example in <code class="docutils literal notranslate"><span class="pre">/home/student/my_player.py</span></code>. Besides
the definition of your player, this file must contain a factory function
called <cite>team</cite> that returns a team (remember that the default game is a
fight between two teams of two bots each):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python3</span>

<span class="kn">from</span> <span class="nn">pelita.player</span> <span class="k">import</span> <span class="n">AbstractPlayer</span><span class="p">,</span> <span class="n">SimpleTeam</span>
<span class="kn">from</span> <span class="nn">pelita.datamodel</span> <span class="k">import</span> <span class="n">stop</span>


<span class="k">class</span> <span class="nc">MyPlayer</span><span class="p">(</span><span class="n">AbstractPlayer</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Basically a clone of the StoppingPlayer. &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">get_move</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">stop</span>

<span class="k">def</span> <span class="nf">team</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">SimpleTeam</span><span class="p">(</span><span class="s2">&quot;My Team&quot;</span><span class="p">,</span> <span class="n">MyPlayer</span><span class="p">(),</span> <span class="n">MyPlayer</span><span class="p">())</span>
</pre></div>
</div>
<p>The factory function is used by the command-line program to lead your
players into the game.
To run a game using your players against some predefined players in
Pelita you can run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pelita /home/student/my_player.py FoodEatingPlayer,SmartRandomPlayer
</pre></div>
</div>
<p>This setup is fine for small tests, but if you plan to have a more
complicated directory structure, for example to load additional
utilities located in different files, read on to section
<a class="reference internal" href="#tournament-setup">Tournament Setup</a>.</p>
</div>
<div class="section" id="load-custom-layouts">
<h2>Load Custom Layouts<a class="headerlink" href="#load-custom-layouts" title="Permalink to this headline">¶</a></h2>
<p>For testing purposes it may be useful to use small hand-crafted maze
layouts instead of the default big ones. You can easily define your
own layout in a file and load it into the game with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pelita --layoutfile my_test_layout.txt /home/student/my_player.py FoodEatingPlayer,SmartRandomPlayer
</pre></div>
</div>
<p>A layout file looks like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>################################
#   #. #.#.#       #     #.#.#3#
# # ##       ##  #   ###   #.#1#
# # #. # ###    #### .#..# # # #
# # ## # ..# #   #   ##### # # #
# #    ##### ###   ###.#   # # #
# ## # ..#.  #.###       #   # #
# #. ##.####        #.####  ## #
# ##  ####.#        ####.## .# #
# #   #       ###.#  .#.. # ## #
# # #   #.###   ### #####    # #
# # # #####   #   # #.. # ## # #
# # # #..#. ####    ### # .# # #
#0#.#   ###   #  ##       ## # #
#2#.#.#     #       #.#.# .#   #
################################
</pre></div>
</div>
<p>As you can see from the example, only a few characters are needed to encode a
maze:</p>
<dl class="field-list simple">
<dt class="field-odd"><code class="docutils literal notranslate"><span class="pre">'#'</span></code></dt>
<dd class="field-odd"><p>wall</p>
</dd>
<dt class="field-even"><code class="docutils literal notranslate"><span class="pre">'</span> <span class="pre">'</span></code></dt>
<dd class="field-even"><p>free space</p>
</dd>
<dt class="field-odd"><code class="docutils literal notranslate"><span class="pre">'.'</span></code></dt>
<dd class="field-odd"><p>food</p>
</dd>
</dl>
<p>In addition, the starting position of each bot is specified by a number. In the
above example <code class="docutils literal notranslate"><span class="pre">0</span></code> and <code class="docutils literal notranslate"><span class="pre">2</span></code> are on the team on the left and <code class="docutils literal notranslate"><span class="pre">1</span></code> and <code class="docutils literal notranslate"><span class="pre">3</span></code>
are on the team on the right.  There are some restrictions on the encoding
however:</p>
<ul class="simple">
<li><p>The maze must be rectangular and even in the x-direction.</p></li>
<li><p>It must be fully enclosed by walls.</p></li>
<li><p>No illegal characters can be used.</p></li>
</ul>
<p>Any leading or trailing whitespace will be stripped. The layout will be
parsed for correctness and an exception will be raised if any errors are
detected.</p>
<div class="section" id="tournament-setup">
<h3>Tournament Setup<a class="headerlink" href="#tournament-setup" title="Permalink to this headline">¶</a></h3>
<p>If you are participating in the <a class="reference external" href="https://python.g-node.org/wiki/">Python Summer School, Munich, Germany,
2015</a>, use the following instructions to
organize your files such that we can load your players during the
tournament.  You will need to create a python package, i.e. a
directory containing (at least) an <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file. This package
must be named <code class="docutils literal notranslate"><span class="pre">groupN</span></code>, where <code class="docutils literal notranslate"><span class="pre">N</span></code> is your group number.
This package needs to provide a top level function <code class="docutils literal notranslate"><span class="pre">team()</span></code> which
returns a <code class="docutils literal notranslate"><span class="pre">SimpleTeam</span></code>.</p>
<p>The file structure should look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>groupN
├── __init__.py
├── utils.py
└── my_player.py
</pre></div>
</div>
<p>An example repository has been provided at <a class="reference external" href="https://github.com/ASPP/pelita_player">github.com/ASPP/pelita_player</a></p>
<p>Your <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> could look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python3</span>

<span class="kn">from</span> <span class="nn">pelita.player</span> <span class="k">import</span> <span class="n">SimpleTeam</span>
<span class="kn">from</span> <span class="nn">.my_player</span> <span class="k">import</span> <span class="n">MyPlayer</span>

<span class="c1"># The default factory method, which this module must export.</span>
<span class="c1"># It must return an instance of `SimpleTeam`  containing</span>
<span class="c1"># the name of the team and the respective instances for</span>
<span class="c1"># the first and second player.</span>

<span class="k">def</span> <span class="nf">team</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">SimpleTeam</span><span class="p">(</span><span class="s2">&quot;My Team&quot;</span><span class="p">,</span> <span class="n">MyPlayer</span><span class="p">(),</span> <span class="n">MyPlayer</span><span class="p">())</span>

<span class="c1"># For testing purposes, one may use alternate team factory methods::</span>
<span class="c1">#</span>
<span class="c1">#     def test_team():</span>
<span class="c1">#          return SimpleTeam(&quot;Our alternate Team&quot;, AlternatePlayer(), AlternatePlayer())</span>
<span class="c1">#</span>
<span class="c1"># To be used as follows::</span>
<span class="c1">#</span>
<span class="c1">#     $ pelita path_to/groupN/:test_team</span>
</pre></div>
</div>
<p>Your are encouraged to structure your code base into packages.
Always remember to use <a class="reference external" href="http://www.python.org/dev/peps/pep-0328/">relative imports</a>. Note that relative imports only
work for modules, so you must provide a <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file in that case.
For example the function <code class="docutils literal notranslate"><span class="pre">utility</span></code> is provided by the module <code class="docutils literal notranslate"><span class="pre">groupN.utils</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python3</span>

<span class="c1"># This would be a good place for utility functions.</span>

<span class="k">def</span> <span class="nf">utility</span><span class="p">():</span>
    <span class="k">pass</span>

</pre></div>
</div>
<p>To use this module in your <code class="docutils literal notranslate"><span class="pre">my_player.py</span></code> module, a relative import
<code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">.utils</span> <span class="pre">import</span> <span class="pre">utility</span></code> is used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python3</span>

<span class="kn">from</span> <span class="nn">pelita.player</span> <span class="k">import</span> <span class="n">AbstractPlayer</span>
<span class="kn">from</span> <span class="nn">pelita.datamodel</span> <span class="k">import</span> <span class="n">stop</span>

<span class="c1"># use relative imports for things inside your module</span>
<span class="kn">from</span> <span class="nn">.utils</span> <span class="k">import</span> <span class="n">utility</span>

<span class="k">class</span> <span class="nc">MyPlayer</span><span class="p">(</span><span class="n">AbstractPlayer</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Basically a clone of the StoppingPlayer. &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">get_move</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">utility</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">stop</span>
</pre></div>
</div>
<p>Also, please perform any additional initialisation inside this
function, since it will be called once for every game.</p>
<p>To run a game from a module, ensure that it exports the <cite>team()</cite> function,
as it was done in <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> above, which will return your actual team.
Also, for a module, you would not reference the Python file but only the
module itself:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pelita /home/student/groupN/ FoodEatingPlayer,SmartRandomPlayer
</pre></div>
</div>
<p>or, if you would be using a differently named factory method:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pelita /home/student/groupN/:second_team FoodEatingPlayer,SmartRandomPlayer
</pre></div>
</div>
</div>
</div>
<div class="section" id="debugging">
<h2>Debugging<a class="headerlink" href="#debugging" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">pelita</span></code> script runs the client code in a subprocess. When started
from a terminal, the client code can be made to interact with user input.</p>
<p>For a start, let us consider a Player which does nothing but call the Python
debugger for help:</p>
<p>We want to use this player in our left team and let the server choose a random
team for the right hand side. Additionally, we disable the timeouts:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pelita --no-timeout DebuggablePlayer
</pre></div>
</div>
<p>We now can interact with the game by manually setting the direction at
each step:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="o">./</span><span class="n">pelita</span><span class="o">/</span><span class="n">player</span><span class="o">.</span><span class="n">py</span><span class="p">(</span><span class="mi">494</span><span class="p">)</span><span class="n">get_move</span><span class="p">()</span>
<span class="o">-&gt;</span> <span class="k">return</span> <span class="n">direction</span>
<span class="p">(</span><span class="n">Pdb</span><span class="p">)</span> <span class="n">direction</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="n">Pdb</span><span class="p">)</span> <span class="n">c</span>
<span class="o">&gt;</span> <span class="o">./</span><span class="n">pelita</span><span class="o">/</span><span class="n">player</span><span class="o">.</span><span class="n">py</span><span class="p">(</span><span class="mi">494</span><span class="p">)</span><span class="n">get_move</span><span class="p">()</span>
<span class="o">-&gt;</span> <span class="k">return</span> <span class="n">direction</span>
<span class="p">(</span><span class="n">Pdb</span><span class="p">)</span> <span class="n">direction</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="p">(</span><span class="n">Pdb</span><span class="p">)</span> <span class="n">c</span>
<span class="o">&gt;</span> <span class="o">./</span><span class="n">pelita</span><span class="o">/</span><span class="n">player</span><span class="o">.</span><span class="n">py</span><span class="p">(</span><span class="mi">494</span><span class="p">)</span><span class="n">get_move</span><span class="p">()</span>
<span class="o">-&gt;</span> <span class="k">return</span> <span class="n">direction</span>
<span class="p">(</span><span class="n">Pdb</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Taking standard input may sometimes misbehave. Possible issues may include
the occasional not responding on keystrokes, garbled output and the
failure to automatically shutdown the program. In these cases, it is
useful to press the keyboard interrupt (CTRL+C) a couple of times.</p>
<p>Obviously, mixing two DebuggingPlayers, both waiting on input will lead to
confusion.</p>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Pelita</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=ASPP&repo=pelita&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="info.html">Project Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules.html">Game rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="writing_player.html">Writing a Player</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Running Players</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#where-to-place-your-files">Where to Place Your Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#load-custom-layouts">Load Custom Layouts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tournament-setup">Tournament Setup</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#debugging">Debugging</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-api.html">User API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API reference</a></li>
</ul>


<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2011–2015, Valentin Haenel, Rike-Benjamin Schuppner et. al..
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.1.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/running_player.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>