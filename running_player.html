<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Running Players &mdash; Pelita v0.2.0-268-g069a94a documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     'v0.2.0-268-g069a94a',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Pelita v0.2.0-268-g069a94a documentation" href="index.html" />
    <link rel="next" title="Development" href="development.html" />
    <link rel="prev" title="Writing a Player" href="writing_player.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="running-players">
<h1>Running Players<a class="headerlink" href="#running-players" title="Permalink to this headline">¶</a></h1>
<p>To run a game using your player, you should use the command-line interface:
<code class="docutils literal"><span class="pre">pelitagame</span></code>. Run it with the <code class="docutils literal"><span class="pre">--help</span></code> option to get a detailed usage
description.</p>
<div class="section" id="where-to-place-your-files">
<h2>Where to Place Your Files<a class="headerlink" href="#where-to-place-your-files" title="Permalink to this headline">¶</a></h2>
<p>To begin using your own player you need to put its definition in a place
where <code class="docutils literal"><span class="pre">pelitagame</span></code> can find it.</p>
<p>Put the definition of your player in a file outside the Pelita source
code directory, for example in <code class="docutils literal"><span class="pre">/home/student/my_player.py</span></code>. Besides
the definition of your player, this file must contain a factory
function that returns a team (remember that the default game is a
fight between two teams of two bots each):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#!/usr/bin/env python3</span>
<span class="c"># -*- coding: utf-8 -*-</span>

<span class="kn">from</span> <span class="nn">pelita.player</span> <span class="kn">import</span> <span class="n">AbstractPlayer</span><span class="p">,</span> <span class="n">SimpleTeam</span>
<span class="kn">from</span> <span class="nn">pelita.datamodel</span> <span class="kn">import</span> <span class="n">stop</span>


<span class="k">class</span> <span class="nc">MyPlayer</span><span class="p">(</span><span class="n">AbstractPlayer</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Basically a clone of the StoppingPlayer. &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">get_move</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">stop</span>

<span class="k">def</span> <span class="nf">factory</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">SimpleTeam</span><span class="p">(</span><span class="s">&quot;My Team&quot;</span><span class="p">,</span> <span class="n">MyPlayer</span><span class="p">(),</span> <span class="n">MyPlayer</span><span class="p">())</span>
</pre></div>
</div>
<p>The factory function is used by the command-line program to lead your
players into the game.
To run a game using your players against some predefined players in
Pelita you can run</p>
<div class="highlight-python"><div class="highlight"><pre>$ ~/pelita/pelitagame /home/student/my_player.py FoodEatingPlayer,SmartRandomPlayer
</pre></div>
</div>
<p>This setup is fine for small tests, but if you plan to have a more
complicated directory structure, for example to load additional
utilities located in different files, read on to section
<a class="reference internal" href="#tournament-setup">Tournament Setup</a>.</p>
</div>
<div class="section" id="load-custom-layouts">
<h2>Load Custom Layouts<a class="headerlink" href="#load-custom-layouts" title="Permalink to this headline">¶</a></h2>
<p>For testing purposes it may be useful to use small hand-crafted maze
layouts instead of the default big ones. You can easily define your
own layout in a file and load it into the game with:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ~/pelita/pelitagame --layoutfile my_test_layout.txt /home/student/my_player.py FoodEatingPlayer,SmartRandomPlayer
</pre></div>
</div>
<p>A layout file looks like this:</p>
<div class="highlight-text"><div class="highlight"><pre>################################
#   #. #.#.#       #     #.#.#3#
# # ##       ##  #   ###   #.#1#
# # #. # ###    #### .#..# # # #
# # ## # ..# #   #   ##### # # #
# #    ##### ###   ###.#   # # #
# ## # ..#.  #.###       #   # #
# #. ##.####        #.####  ## #
# ##  ####.#        ####.## .# #
# #   #       ###.#  .#.. # ## #
# # #   #.###   ### #####    # #
# # # #####   #   # #.. # ## # #
# # # #..#. ####    ### # .# # #
#0#.#   ###   #  ##       ## # #
#2#.#.#     #       #.#.# .#   #
################################
</pre></div>
</div>
<p>As you can see from the example, only a few characters are needed to encode a
maze:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name"><code class="docutils literal"><span class="pre">'#'</span></code>:</th><td class="field-body">wall</td>
</tr>
<tr class="field-even field"><th class="field-name"><code class="docutils literal"><span class="pre">'</span> <span class="pre">'</span></code>:</th><td class="field-body">free space</td>
</tr>
<tr class="field-odd field"><th class="field-name"><code class="docutils literal"><span class="pre">'.'</span></code>:</th><td class="field-body">food</td>
</tr>
</tbody>
</table>
<p>In addition, the starting position of each bot is specified by a number. In the
above example <code class="docutils literal"><span class="pre">0</span></code> and <code class="docutils literal"><span class="pre">2</span></code> are on the team on the left and <code class="docutils literal"><span class="pre">1</span></code> and <code class="docutils literal"><span class="pre">3</span></code>
are on the team on the right.  There are some restrictions on the encoding
however:</p>
<ul class="simple">
<li>The maze must be rectangular and even in the x-direction.</li>
<li>It must be fully enclosed by walls.</li>
<li>No illegal characters can be used.</li>
</ul>
<p>Any leading or trailing whitespace will be stripped. The layout will be
parsed for correctness and an exception will be raised if any errors are
detected.</p>
<div class="section" id="tournament-setup">
<h3>Tournament Setup<a class="headerlink" href="#tournament-setup" title="Permalink to this headline">¶</a></h3>
<p>If you are participating in the <a class="reference external" href="https://python.g-node.org/wiki/">Python Summer School, Munich, Germany,
2015</a>, use the following instructions to
organize your files such that we can load your players during the
tournament.  You will need to create a python package, i.e. a
directory containing (at least) an <code class="docutils literal"><span class="pre">__init__.py</span></code> file. This package
must be named <code class="docutils literal"><span class="pre">groupN</span></code>, where <code class="docutils literal"><span class="pre">N</span></code> is your group number.
This package needs to provide a top level function <code class="docutils literal"><span class="pre">factory()</span></code> which
returns a <code class="docutils literal"><span class="pre">SimpleTeam</span></code>.</p>
<p>The file structure should look like:</p>
<div class="highlight-python"><div class="highlight"><pre>groupN
├── __init__.py
├── utils.py
└── my_player.py
</pre></div>
</div>
<p>An example repository has been provided at <a class="reference external" href="https://github.com/ASPP/pelita_player">github.com/ASPP/pelita_player</a></p>
<p>Your <code class="docutils literal"><span class="pre">__init__.py</span></code> could look like:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#!/usr/bin/env python3</span>
<span class="c"># -*- coding: utf-8 -*-</span>

<span class="kn">from</span> <span class="nn">pelita.player</span> <span class="kn">import</span> <span class="n">SimpleTeam</span>
<span class="kn">from</span> <span class="nn">.my_player</span> <span class="kn">import</span> <span class="n">MyPlayer</span>

<span class="c"># The default factory method, which this module must export.</span>
<span class="c"># It must return an instance of `SimpleTeam`  containing</span>
<span class="c"># the name of the team and the respective instances for</span>
<span class="c"># the first and second player.</span>

<span class="k">def</span> <span class="nf">factory</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">SimpleTeam</span><span class="p">(</span><span class="s">&quot;My Team&quot;</span><span class="p">,</span> <span class="n">MyPlayer</span><span class="p">(),</span> <span class="n">MyPlayer</span><span class="p">())</span>

<span class="c"># For testing purposes, one may use alternate factory methods::</span>
<span class="c">#</span>
<span class="c">#     def alternate_factory():</span>
<span class="c">#          return SimpleTeam(&quot;Our alternate Team&quot;, AlternatePlayer(), AlternatePlayer())</span>
<span class="c">#</span>
<span class="c"># To be used as follows::</span>
<span class="c">#</span>
<span class="c">#     $ ./pelitagame path_to/groupN/:alternate_factory</span>
</pre></div>
</div>
<p>Your are encouraged to structure your code base into packages.
Always remember to use <a class="reference external" href="http://www.python.org/dev/peps/pep-0328/">relative imports</a>. Note that relative imports only
work for modules, so you must provide a <code class="docutils literal"><span class="pre">__init__.py</span></code> file in that case.
For example the function <code class="docutils literal"><span class="pre">utility</span></code> is provided by the module <code class="docutils literal"><span class="pre">groupN.utils</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#!/usr/bin/env python3</span>
<span class="c"># -*- coding: utf-8 -*-</span>

<span class="c"># This would be a good place for utility functions.</span>

<span class="k">def</span> <span class="nf">utility</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>To use this module in your <code class="docutils literal"><span class="pre">my_player.py</span></code> module, a relative import
<code class="docutils literal"><span class="pre">from</span> <span class="pre">.utils</span> <span class="pre">import</span> <span class="pre">utility</span></code> is used:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#!/usr/bin/env python3</span>
<span class="c"># -*- coding: utf-8 -*-</span>

<span class="kn">from</span> <span class="nn">pelita.player</span> <span class="kn">import</span> <span class="n">AbstractPlayer</span>
<span class="kn">from</span> <span class="nn">pelita.datamodel</span> <span class="kn">import</span> <span class="n">stop</span>

<span class="c"># use relative imports for things inside your module</span>
<span class="kn">from</span> <span class="nn">.utils</span> <span class="kn">import</span> <span class="n">utility</span>

<span class="k">class</span> <span class="nc">MyPlayer</span><span class="p">(</span><span class="n">AbstractPlayer</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Basically a clone of the StoppingPlayer. &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">get_move</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">utility</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">stop</span>
</pre></div>
</div>
<p>Also, please perform any additional initialisation inside this
function, since it will be called once for every game.</p>
<p>To run a game from a module, ensure that it exports the <cite>factory()</cite> function,
as it was done in <code class="docutils literal"><span class="pre">__init__.py</span></code> above, which will return your actual team.
Also, for a module, you would not reference the Python file but only the
module itself:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ~/pelita/pelitagame /home/student/groupN/ FoodEatingPlayer,SmartRandomPlayer
</pre></div>
</div>
<p>or, if you would be using a differently named factory method:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ~/pelita/pelitagame /home/student/groupN/:second_factory FoodEatingPlayer,SmartRandomPlayer
</pre></div>
</div>
</div>
</div>
<div class="section" id="debugging">
<h2>Debugging<a class="headerlink" href="#debugging" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">pelitagame</span></code> script runs the client code in a subprocess. When started
from a terminal, the client code can be made to interact with user input.</p>
<p>For a start, let us consider a Player which does nothing but call the Python
debugger for help:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">pdb</span>
<span class="k">class</span> <span class="nc">DebuggablePlayer</span><span class="p">(</span><span class="n">AbstractPlayer</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Player which invokes pdb on each move. </span>

<span class="sd">    Setting ``direction`` inside the debugger will change</span>
<span class="sd">    its behaviour.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">get_move</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">direction</span> <span class="o">=</span> <span class="n">datamodel</span><span class="o">.</span><span class="n">stop</span>
        <span class="n">pdb</span><span class="o">.</span><span class="n">set_trace</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">direction</span>
</pre></div>
</div>
<p>We want to use this player in our left team and let the server choose a random
team for the right hand side. Additionally, we disable the timeouts:</p>
<div class="highlight-python"><div class="highlight"><pre>$ ~/pelita/pelitagame --no-timeout DebuggablePlayer
</pre></div>
</div>
<p>We now can interact with the game by manually setting the direction at
each step:</p>
<div class="highlight-python"><div class="highlight"><pre>&gt; ./pelita/player.py(494)get_move()
-&gt; return direction
(Pdb) direction = (1,0)
(Pdb) c
&gt; ./pelita/player.py(494)get_move()
-&gt; return direction
(Pdb) direction = (0,1)
(Pdb) c
&gt; ./pelita/player.py(494)get_move()
-&gt; return direction
(Pdb)
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Taking standard input may sometimes misbehave. Possible issues may include
the occasional not responding on keystrokes, garbled output and the
failure to automatically shutdown the program. In these cases, it is
useful to press the keyboard interrupt (CTRL+C) a couple of times.</p>
<p class="last">Obviously, mixing two DebuggingPlayers, both waiting on input will lead to
confusion.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Pelita</a></h1>





<p>
<iframe src="https://ghbtns.com/github-btn.html?user=&repo=&type=watch&count=true&size=large"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>


<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="info.html">Project Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="writing_player.html">Writing a Player</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Running Players</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#where-to-place-your-files">Where to Place Your Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#load-custom-layouts">Load Custom Layouts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tournament-setup">Tournament Setup</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#debugging">Debugging</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="user-api.html">User API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API reference</a></li>
</ul>


<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2011–2015, Valentin Haenel, Rike-Benjamin Schuppner et. al..
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="_sources/running_player.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>